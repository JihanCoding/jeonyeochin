<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>글 작성</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Pretendard&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/newPost/newPost.css">
</head>

<body>
  <header class="app-header">
    <span class="material-icons back-button" onclick="history.back()">chevron_left</span>
    <div class="logo">글 작성</div>
    <span class="material-icons" style="opacity: 0">menu</span>
  </header>

  <div class="form-container">
    <div class="form-group">
      <label>위치 선택</label>
      <div class="map-select" onclick="openMapSelector()">
        지도에서 위치 선택하기
      </div>
      <div id="selected-coords" style="margin-top:10px; color:#2196f3;"></div>
    </div>

    <div class="form-row">
      <div class="form-group category">
        <label for="category">카테고리</label>
        <select id="category">
          <option value="">선택</option>
          <option value="후기">후기</option>
          <option value="질문">질문</option>
          <option value="정보">정보</option>
          <option value="추천">추천</option>
        </select>
      </div>
      <div class="form-group title">
        <label for="title">제목</label>
        <input type="text" id="title" placeholder="제목을 입력하세요" />
      </div>
    </div>

    <div class="photo-grid">
      <div class="photo-box">
        <span class="material-icons">photo_camera</span>
      </div>
      <div class="photo-box">
        <span class="material-icons">add</span>
      </div>
    </div>

    <div class="form-group">
      <label for="content">내용</label>
      <textarea id="content" placeholder="내용을 입력하세요"></textarea>
    </div>
  </div>

  <button class="submit-btn">등록</button>
  <script src="/newPost/newPost.js"></script>
  <script>
    function openMapSelector() {
      // mapSelect.html로 변경
      window.open('/index/mapSelect.html', 'mapSelector', 'width=600,height=700');
    }
    // 좌표가 localStorage에 있으면 표시
    function showSelectedCoords() {
      const coords = localStorage.getItem('selectedCoords');
      const el = document.getElementById('selected-coords');
      if (coords) {
        const { lat, lng } = JSON.parse(coords);
        el.textContent = `선택한 위치: 위도 ${lat}, 경도 ${lng}`;
      } else {
        el.textContent = '';
      }
    }
    window.addEventListener('focus', showSelectedCoords);
    window.addEventListener('DOMContentLoaded', showSelectedCoords);
  </script>
</body>

</html>